<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title >Temperaturas Interna e Externa - Projeto MABEL</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="/frontend/style.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    form { margin-bottom: 20px; }
    canvas { max-width: 800px; max-height: 400px; margin-bottom: 50px; }
  </style>
</head>
<body>
  <h1 class="MEBEL">Temperaturas Internas e Externas Registradas</h1>

  <form id="form-filtro">
    <label>Data inicial:</label>
    <input type="date" id="inicio" value="2025-06-01">
    <label>Data final:</label>
    <input type="date" id="fim" value="2025-06-30">
    <button type="submit">Filtrar</button>
  </form>

  <div id="status" class="loading"></div> <!-- ✅ Adicione isso -->

    <h3>Temperatura Interna</h3>
  <canvas id="grafico_ti"></canvas>

  <h3>Temperatura Externa</h3>
  <canvas id="grafico_te"></canvas>

  <!-- importa primeiro os JS dos gráficos -->
  <script src="js/grafico_ti_mabel.js"></script>
  <script src="js/grafico_te_mabel.js"></script>

  <!-- depois o script controlador -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('form-filtro');
    const status = document.getElementById('status');

    async function atualizarGraficos(inicio, fim) {
      status.textContent = "Carregando dados...";
      if (typeof carregarTI === "function") await carregarTI(inicio, fim);
      if (typeof carregarTE === "function") await carregarTE(inicio, fim);
      status.textContent = "";
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const inicio = document.getElementById('inicio').value;
      const fim = document.getElementById('fim').value;
      atualizarGraficos(inicio, fim);
    });

    atualizarGraficos('2025-06-01', '2025-06-30');
  });
  </script>
</body>
 <li class="navbar"><a href="/frontend/index.html">Voltar</a></li>
</html>
